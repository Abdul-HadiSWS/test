@model IEnumerable<LearningPortal.Models.Courses>


@{
    if (Model == null)
    {
        <div class="media align-items-center mb-headings">
            <div class="media-body">
                <h1 class="h2">No Course Available</h1>
            </div>
        </div>
    }
    else
    {
        foreach (var item in Model)
        {

            <div class="carousel-item col-sm-6 col-md-4 col-lg-3 active" id="row_@item.CourseId">

                <div class="card">
                    <div class="modal fade" id="myModal" role="dialog">
                        <div class="modal-dialog">

                            <!-- Modal content-->
                            <div class="modal-content">
                                <div class="modal-header">

                                    <h4 class="modal-title">Delete Course</h4>
                                    <button type="button" class="close ml-2" data-dismiss="modal">&times;</button>
                                </div>
                                <div class="modal-body">
                                    <p>Are you sure you want to delete this!</p>
                                    
                                </div>
                                
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-default canclebutton" data-dismiss="modal">Cancel</button>
                                    <button type="button" class="btn btn-danger deleteCour" data-dismiss="modal" value="">Delete</button>
                                </div>
                            </div>

                        </div>
                    </div>


                    @{
                        var d = item.CourseId;
                    }

                    @Html.Hidden("cid",d)
                    <a href="student-take-course.html">
                        <img src="~/assets/images/@item.Image"
                             alt="Card image cap"
                             style="width:100%;">
                    </a>
                    <div class="card-header text-center">
                        <h5 class="card-title m-0" style="text-align:center; font-size:13px;">@item.CourseName</h5>
                        <div>
                            <div class="mt-3"></div>
                            <small class="text-muted">DateUploaded: </small>
                            <small class="text-muted"> @item.UploadedDate.Day/@item.UploadedDate.Month/@item.UploadedDate.Year</small>
                        </div>
                    </div>
                    <div class="card-body px-0">

                        <div style="display: flex; justify-content: center;">

                            <div class="d-flex justify-content-around w-75">
                                <a href="#"
                                   class="btn btn-white w-25"><i class="material-icons">create</i></a>
                                <a href="#"
                                   class="btn btn-white w-25 deletecourse" data-toggle="modal" data-target="#myModal" data-id="@item.CourseId"><i class="material-icons">delete</i></a>

                                <a href="#"
                                   class="btn btn-white w-25 featcheckbox" data-id="@item.CourseId">
                                    @{ if (item.IsFeatured == true)
                                        {
                                            <input id="check" type="checkbox" checked />

                                        }
                                        else
                                        {
                                            <input id="check" type="checkbox" />}
                                    }
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        }

    }
}

<script>
$(document).ready(function () {

    $(".featcheckbox").click(function () {
        
        var serialNumber = $(this).data('id');
        
        $.ajax({
            type: "POST",
            url: "/Admin/MarkFeatureCourse",
            
            data: {
                Cid: serialNumber
            },
            success: function (response) {

               
               

            },
            error: function () {
                alert(error);
            }
        })
        //if ($("#check").is(":not(:checked)")) {

        //    alert("Checkbox is unchecked.");
        //}

        //else if ($("#check").is(":checked")) {

        //    alert("Checkbox is checked.");
        //}


       
    });

    //var id = document.getElementById("cid");
           $(".deletecourse").click(function () {
            var valdelete = $(this).data('id');
            //alert(valdelete);
            $(".deleteCour").attr("value", valdelete);
        });

        $(".deleteCour").click(function () {
            var valdelete = $(this).val();
            //alert(valdelete + " " + id);
            
            $.ajax({
                type: "POST",
                url: "/Admin/DeleteCourse",

                data: {
                    Cid: valdelete
                },
                success: function (response) {
                   
                    
                    $("#row_" + valdelete).remove();

                },
                error: function () {
                   // alert(error);
                }
            })

            //$(".deleteCour").attr("value", valdelete);
        });

        })
    </script>
