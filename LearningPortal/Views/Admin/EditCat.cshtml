<div class="modal fade" id="editModal">
    <div class="modal-dialog" style=" margin-top: 13%;margin-left: 40%;">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Category Details</h4>
                <button type="button" class="close ml-2" data-dismiss="modal">&times;</button>
            </div>

            <div class="modal-body">
                <input type="hidden" name="name" id="catId" value="@ViewBag.CatId" />
                <div class="form-group row">
                    <label for="title" class="col-md-4 col-form-label form-label">Category Name</label>
                    <div class="col-md-6">
                        <input id="catName" type="text" class="form-control" value="@ViewBag.check" name="Catname" required placeholder="Category Name"><br /><br />
                    </div>
                </div>
                <div class="form-group row">
                    <label for="title" class="col-md-4 col-form-label form-label">Category Image</label>
                    <div class="col-md-6 verflow-hidden">
                        <input type="file" class="addimg" id="catImage" name="@ViewBag.Image" value="@ViewBag.Image"  />
                        <p class='text-mute'>Image size must be 256x256 and File type is png | jpg | jpeg</p>
                    </div>
                </div>
                <div class="d-flex justify-content-end">
                    <button type="button" class="btn btn-default canclebutton" data-dismiss="modal">Cancel</button>
                    <button class="btn btn-primary ml-2 editCat" type="submit" data-dismiss="modal"><i class="material-icons"></i>Save</button>

                </div>
            </div>
        </div>
    </div>
    </div>

<script>
    $(document).ready(function () {
        $(".addimg").on('change', function () {
            var imgext = $(this).val().toString().replace(/^.*\./, "").toLowerCase();
            var imgwidth = $(this).width();
            var imgheight = $(this).height();
            console.log(imgext, typeof (imgwidth), imgheight)

            if (imgwidth === 256 && imgheight === 256 && imgext == "png" || imgext == "jpg" || imgext == "jpeg") {
                $(".editCat").prop('disabled', false);
                $(this).siblings().addClass("text-muted");
                $(this).siblings().removeClass("text-danger");
            }
            else {
                $(this).siblings().removeClass("text-muted");
                $(this).siblings().addClass("text-danger");
                $(".editCat").prop('disabled', true);
            }





        });

                $(".editCat").click(function () {
                    var formData = new FormData();
                    var file = document.getElementById("catImage").files[0];
                    formData.append("catImage", file);

                    var Name = $('#catName').val()
                    formData.append("catName", Name);

                    var cid = $('#catId').val()
                    formData.append("catId", cid);
                    $.ajax({
                    type: "POST",
                    url: "/Admin/EditCat",
                    data: formData,
                    processData: false,
                    contentType: false,
                        success: function (response) {
                            //alert("Updated");
                           // console.log(response);
                            $("#row_" + cid).load(" #row_" + cid +" > *");
                        }
                    });  

                });
            })
</script>
